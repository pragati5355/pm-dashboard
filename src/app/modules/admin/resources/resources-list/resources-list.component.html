<div class="absolute inset-0 flex flex-col min-w-0 overflow-hidden">
    <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent">
        <!-- Drawer -->
        <mat-drawer
            class="w-full md:w-160 dark:bg-gray-900"
            [mode]="drawerMode"
            [opened]="false"
            [position]="'end'"
            [disableClose]="true"
            #matDrawer
        >
            <router-outlet></router-outlet>
        </mat-drawer>

        <mat-drawer-content class="flex flex-col">
            <div class="flex-auto">
                <div
                    class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent"
                >
                    <div
                        class="relative flex flex-col sm:flex-row md:flex-col justify-between py-8 px-6 md:px-8 border-b bg-card dark:bg-transparent"
                    >
                        <div class="flex justify-between gap-4 flex-wrap">
                            <div class="flex-1">
                                <mat-form-field
                                    class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full"
                                >
                                    <mat-icon
                                        class="icon-size-5"
                                        matPrefix
                                        [svgIcon]="'heroicons_solid:search'"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        [autocomplete]="'off'"
                                        #searchInputField
                                        [formControl]="searchControl"
                                        [placeholder]="'Search by resource name'"
                                    />
                                    <mat-icon
                                        *ngIf="searchControl?.value"
                                        class="icon-size-5 cursor-pointer"
                                        matSuffix
                                        [svgIcon]="'heroicons_solid:x'"
                                        (click)="searchControl?.reset()"
                                    ></mat-icon>
                                </mat-form-field>
                            </div>

                            <div class="flex-2">
                                <div class="flex items-center gap-4">
                                    <div class="relative filter-container">
                                        <button
                                            #toggleButton
                                            (click)="showFilter()"
                                            mat-stroked-button
                                            class="ml-2 rounded-full border py-1 px-4 items-center border-gray-500"
                                            [matTooltip]="'Filter'"
                                        >
                                            <mat-icon
                                                svgIcon="heroicons_outline:adjustments"
                                            ></mat-icon>
                                        </button>

                                        <div
                                            *ngIf="showFilterArea"
                                            class="filter-content shadow-lg rounded-md p-4 w-[500px]"
                                            id="filter-area"
                                            #menu
                                        >
                                            <mat-form-field
                                                class="mb-4 fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full"
                                            >
                                                <mat-select
                                                    [placeholder]="
                                                        'Choose project'
                                                    "
                                                    [disableOptionCentering]="
                                                        true
                                                    "
                                                    (selectionChange)="
                                                        selectChangeProject(
                                                            $event
                                                        )
                                                    "
                                                    [formControl]="projects"
                                                >
                                                    <mat-option
                                                        >None</mat-option
                                                    >
                                                    <mat-option
                                                        *ngFor="
                                                            let project of projectsList
                                                        "
                                                        [value]="project?.id"
                                                        >{{
                                                            project?.name
                                                        }}</mat-option
                                                    >
                                                </mat-select>
                                                <mat-icon
                                                    *ngIf="selectedProject"
                                                    class="icon-size-5 cursor-pointer"
                                                    matSuffix
                                                    [svgIcon]="
                                                        'heroicons_solid:x'
                                                    "
                                                    (click)="
                                                        clearProjectSearch()
                                                    "
                                                ></mat-icon>
                                            </mat-form-field>
                                            <mat-form-field
                                                *ngIf="!hideTechnologyField"
                                                class="example-chip-list fuse-mat-rounded w-full"
                                                appearance="fill"
                                            >
                                                <mat-chip-list
                                                    #chipList
                                                    aria-label="Fruit selection"
                                                    class="ml-[0px] mt-2 mb-2"
                                                >
                                                    <mat-chip
                                                        *ngFor="
                                                            let tech of selectedTechnology
                                                        "
                                                        (removed)="remove(tech)"
                                                    >
                                                        {{ tech }}
                                                        <button matChipRemove>
                                                            <mat-icon class="pb-1 pr-1.5"
                                                                >cancel</mat-icon
                                                            >
                                                        </button>
                                                    </mat-chip>
                                                    <input
                                                        placeholder="Choose technologies."
                                                        #fruitInput
                                                        [formControl]="
                                                            technologyCtrl
                                                        "
                                                        [matAutocomplete]="auto"
                                                        [matChipInputFor]="
                                                            chipList
                                                        "
                                                        [matChipInputSeparatorKeyCodes]="
                                                            separatorKeysCodes
                                                        "
                                                        (matChipInputTokenEnd)="
                                                            add($event)
                                                        "
                                                    />
                                                </mat-chip-list>
                                                <mat-autocomplete
                                                    #auto="matAutocomplete"
                                                    (optionSelected)="
                                                        selected($event)
                                                    "
                                                >
                                                    <mat-option
                                                        *ngFor="
                                                            let tech of filteredTechnology
                                                                | async
                                                        "
                                                        [value]="tech"
                                                    >
                                                        {{ tech?.name }}
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>

                                            <div
                                                class="justify-between content-center text-gray-400 inline-flex mb-4 py-1.5 rounded-full border border-gray-300 w-full"
                                                *ngIf="minExprience || maxExprience"
                                            >
                                                <div
                                                    class="flex flex-0 items-center justify-center ml-4"
                                                >
                                                    {{ minExprience }} to
                                                    {{ maxExprience }}
                                                </div>
                                                <div
                                                    class="mat-select-arrow-wrapper mt-2 cursor-pointer"
                                                >
                                                    <mat-icon
                                                        class="mr-4 text-gray-400 icon-size-4 cursor-pointer"
                                                        svgIcon="heroicons_outline:x"
                                                        (click)="
                                                            getExprience(
                                                                $event,
                                                                'remove'
                                                            )
                                                        "
                                                    ></mat-icon>
                                                </div>
                                            </div>
                                            <div class="w-full">
                                                <button
                                                    class="justify-between text-gray-400 w-full mb-4"
                                                    mat-stroked-button
                                                    [matMenuTriggerFor]="
                                                        beforeMenu
                                                    "
                                                >
                                                    Choose experience
                                                </button>
                                            </div>
                                            <mat-menu
                                                #beforeMenu="matMenu"
                                                xPosition="before"
                                                class="mt-4"
                                            >
                                                <form
                                                    [formGroup]="exprienceForm"
                                                >
                                                    <div
                                                        class="flex items-center min-w-50 px-3 py-2"
                                                    >
                                                        <mat-form-field
                                                            class="w-72-px fuse-mat-dense fuse-mat-no-subscript"
                                                            (click)="
                                                                $event.stopPropagation()
                                                            "
                                                        >
                                                            <input
                                                                [autocomplete]="
                                                                    'off'
                                                                "
                                                                [placeholder]="
                                                                    'Min'
                                                                "
                                                                formControlName="minExprience"
                                                                matInput
                                                            />
                                                        </mat-form-field>
                                                        <span class="px-2"
                                                            >to</span
                                                        >
                                                        <mat-form-field
                                                            class="w-72-px fuse-mat-dense fuse-mat-no-subscript"
                                                            (click)="
                                                                $event.stopPropagation()
                                                            "
                                                        >
                                                            <input
                                                                [autocomplete]="
                                                                    'off'
                                                                "
                                                                [placeholder]="
                                                                    'Max'
                                                                "
                                                                formControlName="maxExprience"
                                                                matInput
                                                            />
                                                        </mat-form-field>
                                                        <button
                                                            [color]="'primary'"
                                                            class="ml-4 rounded"
                                                            mat-flat-button
                                                            (click)="
                                                                getExprience(
                                                                    $event,
                                                                    'add'
                                                                )
                                                            "
                                                        >
                                                            <span
                                                                class="ml-2 mr-1"
                                                                >Apply</span
                                                            >
                                                        </button>
                                                    </div>
                                                </form>
                                            </mat-menu>

                                            <mat-form-field
                                                class="mb-4 fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full"
                                            >
                                                <mat-select
                                                    (selectionChange)="
                                                        resourceBenchShadow()
                                                    "
                                                    [disableOptionCentering]="
                                                        true
                                                    "
                                                    [placeholder]="
                                                        'Bench/Shadow Resource'
                                                    "
                                                    multiple
                                                    panelClass="multiple-select-style"
                                                    [formControl]="
                                                        isShadowIsBench
                                                    "
                                                >
                                                    <mat-option [value]="0"
                                                        >Bench</mat-option
                                                    >
                                                    <mat-option [value]="1"
                                                        >Shadow</mat-option
                                                    >
                                                </mat-select>
                                                <mat-icon
                                                    *ngIf="isBench || isShadow"
                                                    class="icon-size-5 cursor-pointer"
                                                    matSuffix
                                                    [svgIcon]="
                                                        'heroicons_solid:x'
                                                    "
                                                    (click)="
                                                        clearBenchShadowSearch()
                                                    "
                                                ></mat-icon>
                                            </mat-form-field>

                                            <mat-form-field
                                                *ngIf="!hideReportingManagerField"
                                                class="example-chip-list fuse-mat-rounded w-full"
                                                appearance="fill"
                                            >
                                                <mat-chip-list
                                                    #chipList
                                                    aria-label="Fruit selection"
                                                    class="ml-[0px] mt-2 mb-2"
                                                >
                                                    <mat-chip
                                                        *ngFor="
                                                            let managerName of selectedManager
                                                        "
                                                        (removed)="removeManager(managerName)"
                                                    >
                                                        {{ managerName }}
                                                        <button matChipRemove>
                                                            <mat-icon class="pb-1 pr-1.5"
                                                                >cancel</mat-icon
                                                            >
                                                        </button>
                                                    </mat-chip>
                                                    <input
                                                        placeholder ="Choose reporting manager"
                                                        #fruitInput
                                                        [formControl]="
                                                            reportingManager
                                                        "
                                                        [matAutocomplete]="auto"
                                                        [matChipInputFor]="
                                                            chipList
                                                        "
                                                        [matChipInputSeparatorKeyCodes]="
                                                            separatorKeysCodes
                                                        "
                                                        (matChipInputTokenEnd)="
                                                            addManager($event)
                                                        "
                                                    />
                                                </mat-chip-list>
                                                <mat-autocomplete
                                                    #auto="matAutocomplete"
                                                    (optionSelected)="
                                                        selectManager($event)
                                                    "
                                                >
                                                    <mat-option
                                                        *ngFor="let email of emailList"
                                                        [value]="email"
                                                    >
                                                        {{email?.firstName}} {{email?.lastName}}
                                                    </mat-option>
                                                </mat-autocomplete>
                                            </mat-form-field>

                                            <!-- <mat-form-field
                                                class="mb-4 fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full"
                                            >
                                                <mat-select
                                                    [placeholder]="
                                                        'Choose reporting manager'
                                                    "
                                                    [disableOptionCentering]="
                                                        true
                                                    "
                                                    (selectionChange)="
                                                        selectChangeReportingManager(
                                                            $event
                                                        )
                                                    "
                                                    [formControl]="reportingManager"
                                                >
                                                    <mat-option
                                                        >None</mat-option
                                                    >
                                                    <mat-option
                                                        *ngFor="
                                                            let email of emailList
                                                        "
                                                        [value]="email?.id"
                                                        >{{email?.firstName}} {{email?.lastName}}
                                                    </mat-option>
                                                </mat-select>
                                                <mat-icon
                                                    *ngIf="selectedReportingManager"
                                                    class="icon-size-5 cursor-pointer"
                                                    matSuffix
                                                    [svgIcon]="
                                                        'heroicons_solid:x'
                                                    "
                                                    (click)="
                                                        clearReportingManagerSearch()
                                                    "
                                                ></mat-icon>
                                            </mat-form-field> -->

                                            <div class="mt-2 mb-4 pl-1">
                                                <section class="w-full">
                                                    <mat-checkbox
                                                        (change)="
                                                            showOnlyVendors(
                                                                $event
                                                            )
                                                        "
                                                        [checked]="
                                                            showVendorsOnly
                                                        "
                                                        [disabled]="
                                                            selectedProject &&
                                                            isBench &&
                                                            isShadow
                                                        "
                                                        [color]="'primary'"
                                                        class="example-margin"
                                                        >Show vendors
                                                        only</mat-checkbox
                                                    >
                                                </section>
                                            </div>

                                            <div
                                                class="w-full flex justify-end"
                                            >
                                                <button
                                                    [color]="'primary'"
                                                    class="ml-2"
                                                    mat-flat-button
                                                    (click)="showFilter()"
                                                >
                                                    <span class="ml-2 mr-1"
                                                        >Close</span
                                                    >
                                                </button>

                                                <button
                                                    [color]="'primary'"
                                                    class="ml-2"
                                                    mat-flat-button
                                                    (click)="clearFilter()"
                                                >
                                                    <span class="ml-2 mr-1"
                                                        >Clear</span
                                                    >
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- <div class="">
                                        <button
                                            [color]="'primary'"
                                            [matTooltip]="'Add Resource'"
                                            [matMenuTriggerFor]="listCard07Menu"
                                            class="ml-2"
                                            mat-flat-button
                                            *ngIf="userRole === 'ADMIN'"
                                        >
                                            <mat-icon
                                                [svgIcon]="
                                                    'heroicons_outline:plus'
                                                "
                                            ></mat-icon>
                                            <span class="ml-2 mr-1"
                                                >Add</span
                                            >
                                        </button>

                                        <mat-menu #listCard07Menu="matMenu">
                                            <button
                                                (click)="gotoAddResources()"
                                                mat-menu-item
                                            >
                                                Single Upload
                                            </button>
                                            <button
                                                (click)="uploadCsvDialog()"
                                                mat-menu-item
                                            >
                                                CSV Upload
                                            </button>
                                        </mat-menu>
                                    </div> -->

                                    <div class="">
                                        <button
                                            [color]="'primary'"
                                            [matTooltip]="'Invite Resource'"
                                            class="ml-2"
                                            mat-flat-button
                                            (click)="openDialog('ADD', null)"
                                            *ngIf="
                                                userRole === 'ADMIN' ||
                                                userRole === 'HR'
                                            "
                                        >
                                            <mat-icon
                                                [svgIcon]="
                                                    'heroicons_outline:plus'
                                                "
                                            ></mat-icon>
                                            <span class="ml-2 mr-1"
                                                >Invite</span
                                            >
                                        </button>
                                    </div>

                                    <!-- <div class="">
                                        <button
                                            [color]="'primary'"
                                            [matTooltip]="'Onboard Resource'"
                                            class="ml-2"
                                            mat-stroked-button
                                            (click)="gotoOnboardResource()"
                                            *ngIf="
                                                userRole === 'ADMIN' ||
                                                userRole === 'HR'
                                            "
                                        >
                                            <span class="ml-2 mr-1"
                                                >Requests</span
                                            >
                                        </button>
                                    </div>     -->
                                    
                                    <div
                                        class="inline-block"
                                        *ngIf="userRole === 'ADMIN' || userRole === 'PM'"
                                    >
                                        <button
                                            mat-icon-button
                                            [matMenuTriggerFor]="menu"
                                            aria-label="Example icon-button with a menu"
                                        >
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item  (click)="gotoOnboardResource()">
                                                <span>Requests</span>
                                            </button>
                                        <button mat-menu-item (click)="gotoResourceUtilization()">
                                                <span>Resource Utilization</span>
                                        </button>
                                        <button mat-menu-item (click)="gotoResourceAvailablity()">
                                                <span>Resource Availablity</span>
                                        </button>
                                        </mat-menu>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div
                            class="w-screen h-screen z-9999 absolute top-0 right-0"
                            *ngIf="showFilterArea"
                            (click)="showFilter()"
                        ></div>
                    </div>

                    <!-- Main -->
                    <div class="flex flex-auto overflow-hidden">
                        <!-- Resources list -->
                        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto"
                        >
                            <div
                                class="inventory-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                matSortDisableClear
                            >
                                <div></div>
                                <div>Name</div>
                                <div class="hidden lg:block">
                                    Reporting Manager
                                </div>
                                <div class="hidden sm:block">Technology</div>
                                <div class="hidden lg:block">
                                    Active Projects
                                </div>
                                <!-- <div class="hidden lg:block">Team</div> -->
                                <div class="hidden sm:block">Experience</div>
                                <div *ngIf="userRole === 'ADMIN'">Action</div>
                            </div>
                            <ng-container>
                                <div *ngIf="resources?.length > 0" class="grid">
                                    <ng-container
                                        *ngFor="let resource of resources"
                                    >
                                        <div
                                            class="inventory-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b"
                                        >
                                            <div
                                                class="flex items-center cursor-pointer"
                                                (click)="
                                                    viewResource(resource?.id)
                                                "
                                            >
                                                <ng-container
                                                    *ngIf="resource['image']"
                                                >
                                                    <img
                                                        class="relative flex flex-0 items-center justify-center w-12 h-12 mr-6 rounded-full overflow-hidden border object-cover"
                                                        [src]="
                                                            resource['image']
                                                        "
                                                        alt="Contact avatar"
                                                    />
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="!resource['image']"
                                                >
                                                    <div
                                                        class="relative flex flex-0 items-center justify-center w-12 h-12 mr-6 rounded-full overflow-hidden border text-lg uppercase bg-gray-200 text-gray-600"
                                                    >
                                                        {{
                                                            resource?.firstName?.charAt(
                                                                0
                                                            )
                                                        }}
                                                    </div>
                                                </ng-container>
                                            </div>
                                            <div
                                                class="cursor-pointer"
                                                (click)="
                                                    viewResource(resource.id)
                                                "
                                            >
                                                <div
                                                    class="truncate"
                                                    [ngClass]="{
                                                        'hover:text-primary-900 font-medium dark:hover:bg-hover':
                                                            !selectedContact ||
                                                            selectedContact.id !==
                                                                resource.id,
                                                        'bg-primary-50 dark:bg-hover':
                                                            selectedContact &&
                                                            selectedContact?.id ===
                                                                resource?.id
                                                    }"
                                                >
                                                    {{ resource?.firstName }}
                                                    {{ resource?.lastName }}
                                                </div>
                                                <div class="truncate">
                                                    {{ resource?.email }}
                                                </div>
                                            </div>
                                            <div class="hidden sm:block">
                                                {{
                                                    resource?.mentor
                                                        ?.firstName || "-"
                                                }}
                                                {{ resource?.mentor?.lastName}}
                                            </div>
                                            <div
                                                class="grid-flow-row sm:flex truncate cursor-pointer"
                                            >
                                                <div 
                                                    [matTooltip]="resource?.techSkills"
                                                >
                                                    {{resource?.techSkills ||"-"}}
                                                </div>
                                            </div>

                                            <div
                                                class="hidden lg:block truncate cursor-pointer"
                                                [matTooltip]="
                                                    resource?.mbProjects
                                                "
                                            >
                                                {{
                                                    resource?.mbProjects || "-"
                                                }}
                                            </div>
                                            <!-- <div class="hidden sm:block">
                                                {{ resource?.role }}
                                            </div> -->

                                            <div
                                                class="hidden md:flex items-center"
                                            >
                                                {{
                                                    resource?.careerStartDate
                                                        | diffDate
                                                }}
                                            </div>

                                            <div
                                                class="md:block"
                                                *ngIf="userRole === 'ADMIN'"
                                            >
                                                <mat-icon
                                                    *ngIf="!resource?.vendor"
                                                    [matTooltip]="
                                                        'Edit Resource'
                                                    "
                                                    class="text-gray-400 icon-size-5 cursor-pointer mr-4"
                                                    svgIcon="heroicons_outline:pencil"
                                                    (click)="edit(resource?.id)"
                                                ></mat-icon>
                                                <mat-icon
                                                    [matTooltip]="
                                                        'Delete Resource'
                                                    "
                                                    class="text-gray-400 icon-size-5 cursor-pointer"
                                                    svgIcon="heroicons_outline:trash"
                                                    (click)="
                                                        deleteResource(
                                                            resource?.id,
                                                            resource['projects']
                                                        )
                                                    "
                                                ></mat-icon>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container>
                            <ng-container
                                *ngIf="
                                    !initialLoading && resources?.length === 0
                                "
                            >
                                <div
                                    class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center"
                                >
                                    Resources not found
                                </div>
                            </ng-container>
                            <ng-container *ngIf="initialLoading">
                                <app-table-skeleton
                                    [skeletonData]="requiredSkeletonData"
                                ></app-table-skeleton>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </mat-drawer-content>
    </mat-drawer-container>
</div>
